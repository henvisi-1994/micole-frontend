<div class="container mt-4">
  <div class="card shadow">
    <div class="card-header">
      <h5 class="card-title">Filtro de {{ outBoxTitle }}</h5>
    </div>
    <div class="card-body">
      <!-- Formulario de filtros -->
      <form [formGroup]="attendanceForm" (ngSubmit)="onSubmit()">
        <div class="row">
          <div class="col-md-4">
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Escuela</mat-label>
              <input matInput formControlName="school" placeholder="Ingrese la escuela">
            </mat-form-field>
          </div>

          <div class="col-md-4">
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Asignatura</mat-label>
              <input matInput formControlName="subject" placeholder="Ingrese la asignatura">
            </mat-form-field>
          </div>

          <div class="col-md-4">
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Nivel</mat-label>
              <input matInput formControlName="level" placeholder="Ingrese el nivel">
            </mat-form-field>
          </div>
        </div>

        <!-- BotÃ³n de enviar -->
        <div class="mt-3">
          <button mat-raised-button color="primary" [disabled]="attendanceForm.invalid">Buscar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Tabla de asistencias -->
  <app-table
    [title]="outBoxTitle"
    [subtitle]="outBoxSubtitle"
    [headers]="headers"
    [items]="mensajes"
    [itemKeys]="keys"
    [pagination]="pagination"
    [showSearch]="true"
    [hasPagination]="true"
    (onRequest)="onRequest($event)"
    (onAction)="onAction($event)"
  >
    <ng-template #actions let-item="item">
      <button mat-icon-button color="primary" title="Adjuntar evidencia" (click)="onAction({action: 'add_evidence', index: item.studentId})">
        <mat-icon>attach_file</mat-icon>
      </button>
      <button mat-icon-button color="warn" title="Corregir asistencia" (click)="onAction({action: 'correct_attendance', index: item.studentId})">
        <mat-icon>edit</mat-icon>
      </button>
    </ng-template>
  </app-table>
</div>
